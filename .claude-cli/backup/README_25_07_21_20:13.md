# Material Design 3 Only

[![pub version](https://img.shields.io/pub/v/material_design.svg)](https://pub.dev/packages/material_design)
[![license](https://img.shields.io/badge/license-BSD-blue.svg)](/LICENSE)

A **comprehensive and enhanced** toolkit for implementing Material Design 3 in Flutter. Build beautiful, accessible, and responsive UIs aligned with official metrics and guidelines using a powerful set of design tokens, accessibility utilities, adaptive patterns, and ready-to-use helper widgets.

This package provides a **complete implementation** of [Material 3](https://m3.material.io/) guidelines with enhanced features including accessibility support, adaptive design patterns, comprehensive theme integration, and advanced animation utilities.

## Installation

Add this line to your project's `pubspec.yaml` file:

```yaml
dependencies:
  material_design: ^0.6.0
```

Then run `flutter pub get`.

## Table of Contents

- [Installation](#installation)
- [Quick Start](#-quick-start)
- [🏗️ Foundations](#️-foundations)
  - [Token Architecture](#-token-architecture)
  - [Spacing & Layout](#spacing--layout) 
  - [Breakpoints & Density](#breakpoints--density)
  - [Motion System](#motion-system)
- [🎨 Styles](#-styles)
  - [Color System](#color-system)
  - [Typography](#typography)
  - [Elevation & Shadows](#elevation--shadows)
  - [Shape System](#shape-system)
- [🔧 Utilities](#-utilities)
  - [Color Utils](#m3colorutils)
  - [Shape Utils](#m3shapeutils)
  - [Motion Utils](#m3motionutils)
  - [Accessibility Utils](#-complete-accessibility-system)
  - [Adaptive Utils](#-advanced-adaptive-design)
- [🎨 Theme Integration](#-professional-theme-integration)
  - [Complete ThemeData Setup](#complete-themedata-setup)
  - [Component Theme Customization](#component-theme-customization)
  - [Dynamic Theming](#dynamic-theming)
- [📱 Components](#-components)
  - [Buttons](#enhanced-button-variations)
  - [Cards](#enhanced-card-variations)
  - [Forms](#building-a-professional-form)
  - [Layouts](#responsive-dashboard-layout)
- [🚀 Performance](#-performance-considerations)
- [🔧 Migration Guide](#-migration-guide)
- [Examples](#-more-examples)

## 🚀 Quick Start

Import the package to start using the tokens:

```dart
import 'package:material_design/material_design.dart';
```

### Basic Setup

```dart
void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Material Design 3 App',
      theme: M3Theme.light(seedColor: Colors.blue).toThemeData(),
      darkTheme: M3Theme.dark(seedColor: Colors.blue).toThemeData(),
      home: const HomeScreen(),
    );
  }
}
```

---

# 🏗️ Foundations

## 📋 Token Architecture

This library provides a complete implementation following Material Design 3's official token hierarchy:

### 🏗️ Token Hierarchy

#### Reference Tokens (Ref)

Foundation tokens that define the basic design decisions:

- **Color Palettes**: 13-tone color palettes for all color families
- **Typography**: Base typeface definitions and font families
- **Motion**: Fundamental duration and easing curve values
- **Opacity**: Base opacity levels for interaction states

#### System Tokens (Sys)

Semantic tokens that map reference tokens to design intentions:

- **Color Roles**: Primary, secondary, tertiary, error, surface colors
- **Typography Scale**: 15 semantic text styles from display to label
- **Elevation System**: Tonal surface colors and shadow specifications
- **Motion Patterns**: Contextual animation specifications

#### Component Tokens (Comp)

Specific tokens for individual UI components:

- **Button Tokens**: Heights, paddings, radiuses, elevation states
- **Card Tokens**: Elevation levels, shape specifications
- **Dialog Tokens**: Sizing, spacing, and layout specifications
- **Navigation Tokens**: Sizes, spacing for different navigation types

### 🎯 Using the New Token Structure

#### Reference Tokens

```dart
// Access color palettes
final primaryColor = M3RefPalette.getColor(M3RefPalette.primary, 40);
final surfaceColor = M3RefPalette.getColor(M3RefPalette.neutral, 99);

// Typography foundations
final fontFamily = M3RefTypeface.brand; // 'Roboto'
final fontWeight = M3RefTypeface.labelWeight; // 500

// Base motion values
final shortDuration = M3RefDuration.short1; // 250ms
final standardCurve = M3MotionEasing.standard;
```

#### System Tokens

```dart
// Semantic color roles
Container(
  color: M3SysColor.primaryContainer,
  child: Text(
    'System color',
    style: TextStyle(color: M3SysColor.onPrimaryContainer),
  ),
)

// Dark theme colors
final darkScheme = M3SysColorDark.toColorScheme();
```

#### Component Tokens

```dart
// Button specifications
ElevatedButton(
  style: ElevatedButton.styleFrom(
    minimumSize: Size.fromHeight(M3CompButton.heightMedium),
    padding: M3CompButton.paddingMedium,
    shape: RoundedRectangleBorder(
      borderRadius: M3CompButton.shapeMedium,
    ),
  ),
  onPressed: () {},
  child: const Text('Styled Button'),
)
```

## Spacing & Layout

A granular scale for consistent spacing, margins, and layouts following the 4dp grid system.

### M3Spacing

Provides spacing values from `none` to `space128` based on a 4dp grid. Ideal for padding and small gaps between UI elements.

**Example:**

```dart
Padding(
  padding: const EdgeInsets.all(M3Spacing.space16), // 16dp padding
  child: Text('Hello, Material!'),
)
```

### M3Margin

Provides semantic margin values for the outer edges of the screen layout.

- screen (16dp) for compact.
- screenLarge (24dp) for medium/expanded/large/extra-large screens.

**Example:**

```dart
Container(
  margin: const EdgeInsets.symmetric(horizontal: M3Margin.mediumScreen),
  child: Text('Content with screen margins'),
)
```

### M3Spacer

- pane (24dp) for the gap between two content panes.
- screen (16dp) for compact/medium screens.
- screenLarge (24dp) for large/extra-large screens.

**Example:**

```dart
Row(
  children: [
    Expanded(child: ContentPane1()),
    const SizedBox(width: M3Spacer.pane),
    Expanded(child: ContentPane2()),
  ],
)
```

## Breakpoints & Density

### M3Breakpoint

Breakpoints for responsive layouts following M3's window size classes:

- `compact` (0), `medium` (600), `expanded` (840), `large` (1200), `extraLarge` (1600)

**Example:**

```dart
final screenWidth = MediaQuery.of(context).size.width;
if (screenWidth >= M3Breakpoint.medium) {
  // Use a two-column layout
}
```

### M3Density

Adjust component density for different interaction models:

- **`M3Density`**: An enum with `comfortable` (default) and `compact` values.

**Example:**

```dart
// Use a switch to toggle between density settings
final density = isCompact ? M3Density.compact : M3Density.comfortable;

// This could be used to adjust layout constraints
final horizontalPadding = density == M3Density.compact
    ? M3Spacing.space8
    : M3Spacing.space16;
```

## Motion System

Standardized duration and easing curves for animations following M3's motion principles.

### M3MotionDuration

Provides duration values from `short1` to `extralong4`:

**Example:**

```dart
AnimatedContainer(
  duration: M3MotionDuration.long2,
  curve: M3MotionEasing.emphasizedAccelerate,
  // ...
)
```

### M3MotionEasing

Provides easing curves from `emphasizedAccelerate` to `standardDecelerate`:

- `emphasizedDecelerate` - For entering elements
- `emphasizedAccelerate` - For exiting elements  
- `standard` - For simple transitions
- `standardDecelerate` - For persistent elements
- `standardAccelerate` - For temporary elements

---

# 🎨 Styles

## Color System

Complete M3 color system with semantic roles and tonal variations.

### Color Roles & Palettes

- **`M3SysColor`** / **`M3SysColorDark`**: Complete light/dark color role system
- **`M3RefPalette`**: Foundation 13-tone color palettes for Primary, Secondary, Tertiary, Error, Neutral, and NeutralVariant
- **`M3TonalColor`**: Surface colors that adapt based on elevation

**Basic Usage:**

```dart
Container(
  color: M3SysColor.primaryContainer,
  child: Text(
    'Primary container text',
    style: TextStyle(color: M3SysColor.onPrimaryContainer),
  ),
)

// Tonal surface with elevation
Container(
  color: M3TonalColor.fromElevation(context, M3Elevation.level2),
  child: const Text('Elevated surface'),
)
```

## Typography

Complete M3 typography scale with 15 semantic text styles.

### M3TypeScale

Provides the full type scale from `displayLarge` to `labelSmall`:

- **Display**: displayLarge, displayMedium, displaySmall
- **Headline**: headlineLarge, headlineMedium, headlineSmall  
- **Title**: titleLarge, titleMedium, titleSmall
- **Body**: bodyLarge, bodyMedium, bodySmall
- **Label**: labelLarge, labelMedium, labelSmall

**Basic Usage:**

```dart
Text(
  'Display Text',
  style: M3TypeScale.displayLarge,
)

Text(
  'Body Text', 
  style: M3TypeScale.bodyMedium,
)
```

### Enhanced Typography Features

Advanced typography utilities for accessibility and responsiveness:

```dart
// Responsive text that adapts to screen size  
Text(
  'Responsive Title',
  style: M3TypeScale.responsiveDisplay(context),
)

// Enhanced readability for accessibility
Text(
  'Accessible Text',
  style: M3TypeScale.enhancedReadability(
    baseStyle: M3TypeScale.bodyLarge,
    enableDyslexiaSupport: true,
  ),
)

// High contrast text
Text(
  'High Contrast Text',
  style: M3TypeScale.highContrast(M3TypeScale.bodyMedium),
)

// Adaptive text scaling
Text(
  'Adaptive Text',
  style: M3TypeScale.adaptive(
    baseStyle: M3TypeScale.bodyLarge,
    context: context,
  ),
)
```

## Elevation & Shadows

M3's elevation system with proper surface treatment.

### Using Elevation with M3 Tokens

```dart
// Card with M3 elevation
Card(
  elevation: 2.0, // M3 level2 equivalent
  shadowColor: Colors.transparent,
  surfaceTintColor: Theme.of(context).colorScheme.surfaceTint,
  child: content,
)

// Custom container with elevation styling
Container(
  decoration: BoxDecoration(
    color: Theme.of(context).colorScheme.surface,
    borderRadius: BorderRadius.circular(12.0), // M3 medium shape
    boxShadow: [
      BoxShadow(
        color: Colors.black.withOpacity(0.15),
        blurRadius: 4.0,
        offset: const Offset(0, 2),
      ),
    ],
  ),
  child: content,
)
```

## Shape System

Shape system using M3 radius values.

### Using M3 Shape Tokens

```dart
// Using M3 shape utilities for responsive shapes
Container(
  decoration: BoxDecoration(
    borderRadius: M3ShapeUtils.responsiveShape(
      context: context,
      compactShape: 8.0,
      mediumShape: 12.0,
      expandedShape: 16.0,
    ),
    color: Colors.blue,
  ),
)

// Asymmetric shapes
Container(
  decoration: BoxDecoration(
    borderRadius: M3ShapeUtils.asymmetric(
      topLeft: 16.0,
      topRight: 8.0,
      bottomLeft: 8.0,
      bottomRight: 16.0,
    ),
    color: Colors.red,
  ),
)

// Standard radius values
Container(
  decoration: BoxDecoration(
    borderRadius: BorderRadius.circular(12.0), // Medium
    color: Colors.green,
  ),
)
```

---

# 🔧 Utilities

## M3ColorUtils

Color manipulation and accessibility utilities:

```dart
// Validate WCAG contrast compliance
final hasGoodContrast = M3ColorUtils.checkContrast(
  foreground: Colors.black,
  background: Colors.white,
  level: AccessibilityLevel.AA,
);

// Generate accessible color pairs
final accessiblePair = M3ColorUtils.generateAccessiblePair(
  baseColor: Colors.blue,
  targetContrast: 4.5,
);

// Color state utilities
final hoverColor = M3ColorUtils.getStateColor(
  baseColor: Colors.blue,
  state: InteractionState.hover,
);
```

## M3ShapeUtils

Shape utilities for responsive and accessible design:

```dart
// Responsive shape based on screen size
final responsiveShape = M3ShapeUtils.responsiveShape(
  context: context,
  compactShape: 8.0,
  mediumShape: 12.0,
  expandedShape: 16.0,
);

// Asymmetric shape creation
final asymmetricShape = M3ShapeUtils.asymmetric(
  topLeft: 16.0,
  topRight: 8.0,
  bottomLeft: 8.0,
  bottomRight: 16.0,
);

// Accessibility-aware shapes
final accessibleShape = M3ShapeUtils.accessibilityAware(
  baseRadius: 12.0,
  context: context,
);
```

## M3MotionUtils

Animation utilities with accessibility support:

```dart
// Pre-built animation patterns
Widget fadeInWidget = M3MotionUtils.fadeIn(
  duration: Duration(milliseconds: 300),
  child: myWidget,
);

Widget slideWidget = M3MotionUtils.slide(
  offset: const Offset(0, 30),
  child: myWidget,
);

Widget scaleWidget = M3MotionUtils.scale(
  scale: 0.8,
  child: myWidget,
);

// Accessibility-aware animations
Widget accessibleAnimation = M3MotionUtils.accessibilityAware(
  animation: fadeInWidget,
  context: context,
  reduceMotion: true,
);
```

## M3Accessibility

Accessibility utilities and WCAG compliance features:

```dart
// Touch target management
final minTouchTarget = M3Accessibility.touchTarget(
  context: context,
  minSize: const Size(44, 44),
);

// Focus management
M3Accessibility.manageFocus(
  context: context,
  focusNode: myFocusNode,
);

// Screen reader support
final semanticLabel = M3Accessibility.generateSemanticLabel(
  text: 'Submit',
  context: 'form submission button',
);

// High contrast support
final highContrastColor = M3Accessibility.highContrastColor(
  color: Colors.blue,
  background: Colors.white,
);

// Reduced motion support
final shouldReduceMotion = M3Accessibility.shouldReduceMotion(context);
```

## M3Adaptive

```dart
// Responsive layout utilities
Widget responsiveLayout = M3Adaptive.responsiveLayout(
  context: context,
  compact: MobileLayout(),
  medium: TabletLayout(),
  expanded: DesktopLayout(),
);

// Responsive values
final columns = M3Adaptive.responsiveValue<int>(
  context: context,
  compact: 1,
  medium: 2,
  expanded: 3,
);

// Adaptive padding
EdgeInsets padding = M3Adaptive.adaptivePadding(
  context: context,
  compactPadding: 16.0,
  mediumPadding: 24.0,
  expandedPadding: 32.0,
);

// Adaptive dialogs
M3Adaptive.showAdaptiveDialog(
  context: context,
  content: MyDialogContent(),
);

// Adaptive sheets
M3Adaptive.showAdaptiveSheet(
  context: context,
  child: MySheetContent(),
);

// Input method detection
final inputType = M3Adaptive.getInputMethodType(context);
final isTouchInterface = inputType == InputMethodType.touch;
```

### M3AdaptiveScaffold

```dart
class AdaptiveApp extends StatefulWidget {
  @override
  _AdaptiveAppState createState() => _AdaptiveAppState();
}

class _AdaptiveAppState extends State<AdaptiveApp> {
  int selectedIndex = 0;
  
  @override
  Widget build(BuildContext context) {
    return M3AdaptiveScaffold(
      destinations: const [
        NavigationDestination(
          icon: Icon(Icons.home_outlined),
          label: 'Home',
        ),
        NavigationDestination(
          icon: Icon(Icons.search_outlined),
          label: 'Search',
        ),
      ],
      selectedIndex: selectedIndex,
      onDestinationSelected: (index) {
        setState(() => selectedIndex = index);
      },
      body: IndexedStack(
        index: selectedIndex,
        children: const [
          HomeScreen(),
          SearchScreen(),
        ],
      ),
    );
  }
}
```

---

# 🎨 Theme Integration

## M3Theme

Professional theme integration with M3 tokens:

```dart
class AppTheme {
  static ThemeData lightTheme() {
    return M3Theme.light(
      seedColor: Colors.blue,
    ).toThemeData();
  }
  
  static ThemeData darkTheme() {
    return M3Theme.dark(
      seedColor: Colors.blue,
    ).toThemeData();
  }
}

// Usage in MaterialApp
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'M3 App',
      theme: AppTheme.lightTheme(),
      darkTheme: AppTheme.darkTheme(),
      home: const HomeScreen(),
    );
  }
}
```

## Custom ThemeData Integration

You can also integrate M3 tokens directly into your custom ThemeData:

```dart
class CustomAppTheme {
  static ThemeData buildTheme() {
    final colorScheme = M3SysColor.toColorScheme();
    
    return ThemeData(
      useMaterial3: true,
      colorScheme: colorScheme,
      
      // Typography using M3 tokens
      textTheme: TextTheme(
        displayLarge: M3TypeScale.displayLarge,
        bodyLarge: M3TypeScale.bodyLarge,
        // ... other text styles
      ),
      
      // Button themes using M3 component tokens
      elevatedButtonTheme: ElevatedButtonThemeData(
        style: ElevatedButton.styleFrom(
          minimumSize: Size.fromHeight(M3CompButton.heightMedium),
          padding: M3CompButton.paddingMedium,
        ),
      ),
    );
  }
}
```

---

# 📱 Components

## Using M3 Tokens with Components

Instead of hardcoding values, use the M3 tokens throughout your components:

```dart
// Example: Professional Card using M3 tokens
class M3Card extends StatelessWidget {
  final Widget child;
  
  const M3Card({Key? key, required this.child}) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(M3Spacing.space16),
        child: child,
      ),
    );
  }
}

// Example: M3 Button using component tokens
class M3Button extends StatelessWidget {
  final VoidCallback? onPressed;
  final Widget child;
  
  const M3Button({Key? key, this.onPressed, required this.child}) : super(key: key);
  
  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      style: ElevatedButton.styleFrom(
        minimumSize: Size.fromHeight(M3CompButton.heightMedium),
        padding: M3CompButton.paddingMedium,
      ),
      onPressed: onPressed,
      child: child,
    );
  }
}
```

---

# 🚀 Current Implementation Status

## ✅ Fully Implemented Features

- **🎨 Complete Typography System**: M3TypeScale with all 15 semantic styles plus enhanced utilities
- **🌈 Color System**: M3SysColor/M3SysColorDark with full color roles and toColorScheme() methods  
- **🎯 Token Architecture**: Proper ref/sys/comp hierarchy with M3RefPalette complete
- **📏 Spacing System**: M3Spacing with 4dp grid system and M3Breakpoint responsive classes
- **🔧 Utility Classes**: M3ColorUtils, M3ShapeUtils, M3MotionUtils with comprehensive features
- **♿ Accessibility System**: M3Accessibility with WCAG compliance and touch targets
- **📱 Adaptive Design**: M3Adaptive and M3AdaptiveScaffold with responsive layouts
- **🎨 Theme Integration**: M3Theme with complete ThemeData conversion
- **🔲 Component Tokens**: M3CompButton with all button specifications

## 🚧 Implementation Notes

This library follows the official Material Design 3 token structure and provides a solid foundation for building M3-compliant applications. The core systems (typography, colors, spacing, accessibility, and adaptive design) are fully implemented and production-ready.

## 📖 Getting Started

1. **Install the package**:
   ```yaml
   dependencies:
     material_design: ^0.6.0
   ```

2. **Set up your theme**:
   ```dart
   MaterialApp(
     theme: M3Theme.light(seedColor: Colors.blue).toThemeData(),
     darkTheme: M3Theme.dark(seedColor: Colors.blue).toThemeData(),
     home: MyApp(),
   )
   ```

3. **Use tokens in your components**:
   ```dart
   Text('Hello', style: M3TypeScale.headlineLarge)
   Container(color: M3SysColor.primaryContainer)
   ```

4. **Build responsive layouts**:
   ```dart
   M3AdaptiveScaffold(
     destinations: destinations,
     body: content,
   )
   ```

## 🎉 More Examples

For comprehensive examples and interactive demos, visit:

[https://flutterweb-wasm.web.app/](https://flutterweb-wasm.web.app/)

---

**This Material Design 3 library provides a solid foundation for building beautiful, accessible, and responsive Flutter applications following Google's Material Design 3 guidelines. The implemented token system, accessibility features, and adaptive components make it easy to create professional apps that work across all platforms.**
